<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Billing Information - Afro Szn</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/checkout-mobile.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet">
</head>
<body class="checkout-body">
    <!-- Header -->
    <header class="checkout-header">
        <button class="back-btn" onclick="window.history.back()">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                <path d="M19 12H5M12 19l-7-7 7-7"/>
            </svg>
        </button>
        <h1 class="checkout-title" id="eventTitle">THE CALLOUT SHOW</h1>
        <a href="cart.html" class="cart-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                <circle cx="9" cy="21" r="1"></circle>
                <circle cx="20" cy="21" r="1"></circle>
                <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
            </svg>
        </a>
    </header>

    <!-- Content -->
    <main class="checkout-main">
        <!-- Date Header -->
        <p class="event-date-text" id="eventDate">Friday October, 2025, 8:30-10:30</p>

        <!-- Progress Steps -->
        <div class="progress-steps">
            <div class="step completed">âœ“</div>
            <div class="step-line"></div>
            <div class="step active">2</div>
            <div class="step-line"></div>
            <div class="step">3</div>
        </div>

        <!-- Section Title -->
        <h2 class="section-title">Billing information</h2>

        <!-- Billing Form -->
        <form id="billingForm" onsubmit="handleBillingSubmit(event)">
            <div class="form-row">
                <div class="form-group">
                    <label>First name</label>
                    <input type="text" name="firstName" required>
                </div>
                <div class="form-group">
                    <label>Last name</label>
                    <input type="text" name="lastName" required>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" name="email" required>
                </div>
                <div class="form-group">
                    <label>Confirm Email</label>
                    <input type="email" name="confirmEmail" required>
                </div>
            </div>

            <button type="submit" class="primary-btn">Continue to payment</button>
        </form>
    </main>

    <script>
        // Load ticket data
        let ticketData = JSON.parse(sessionStorage.getItem('ticketData') || '{}');
        
        // Update page with data
        if (ticketData.eventName) {
            document.getElementById('eventTitle').textContent = ticketData.eventName;
        }
        if (ticketData.eventDate) {
            document.getElementById('eventDate').textContent = ticketData.eventDate;
        }
        
        function handleBillingSubmit(event) {
            event.preventDefault();
            
            const formData = new FormData(event.target);
            const email = formData.get('email');
            const confirmEmail = formData.get('confirmEmail');
            
            // Validate emails match
            if (email !== confirmEmail) {
                alert('Emails do not match');
                return;
            }
            
            // Save billing info to ticketData
            ticketData.firstName = formData.get('firstName');
            ticketData.lastName = formData.get('lastName');
            ticketData.email = email;
            
            // Save to sessionStorage
            sessionStorage.setItem('ticketData', JSON.stringify(ticketData));
            
            // Navigate to payment page
            window.location.href = 'checkout3.html';
        }
    </script>
</body>
</html>
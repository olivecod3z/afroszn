<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment - Afro Szn</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/checkout-mobile.css">
    <link rel="stylesheet" href="css/validation-errors.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet">
</head>
<body class="checkout-body">
    <!-- Header -->
    <header class="checkout-header">
        <button class="back-btn" onclick="window.history.back()">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                <path d="M19 12H5M12 19l-7-7 7-7"/>
            </svg>
        </button>
        <h1 class="checkout-title">AFRO SEASON VOLUME 4</h1>
        <a href="cart.html" class="cart-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                <circle cx="9" cy="21" r="1"></circle>
                <circle cx="20" cy="21" r="1"></circle>
                <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
            </svg>
        </a>
    </header>

    <!-- Content -->
    <main class="checkout-main">
        <!-- Date Header -->
        <p class="event-date-text">Friday October, 2025, 8:30-10:30</p>

        <!-- Progress Steps -->
        <div class="progress-steps">
            <div class="step completed">✓</div>
            <div class="step-line"></div>
            <div class="step completed">✓</div>
            <div class="step-line"></div>
            <div class="step active">3</div>
        </div>

        <!-- Section Title -->
        <div class="section-header">
            <h2 class="section-title">Payment Method</h2>
            <p class="section-subtitle">Choose how you'd like to pay</p>
        </div>
        <!-- Payment Methods -->
       
        <div class="payment-options">
            <!-- Card Option -->
            <div class="payment-option">
                <input type="radio" id="card" name="payment" checked>
                <label for="card">
                <div class="option-content">
                    <div class="radio-circle"></div>
                    <div class="icon-container">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="1" y="4" width="22" height="16" rx="2" ry="2"/>
                        <line x1="1" y1="10" x2="23" y2="10"/>
                    </svg>
                    </div>
                    <div class="text-content">
                    <div class="option-title">Card</div>
                    <div class="option-description">Pay with debit or credit card</div>
                    <div class="badges">
                        <span class="badge">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M17.05 20.28c-.98.95-2.05.8-3.08.35-1.09-.46-2.09-.48-3.24 0-1.44.62-2.2.44-3.06-.35C2.79 15.25 3.51 7.59 9.05 7.31c1.35.07 2.29.74 3.08.8 1.18-.24 2.31-.93 3.57-.84 1.51.12 2.65.72 3.4 1.8-3.12 1.87-2.38 5.98.48 7.13-.57 1.5-1.31 2.99-2.54 4.09l.01-.01zM12.03 7.25c-.15-2.23 1.66-4.07 3.74-4.25.29 2.58-2.34 4.5-3.74 4.25z"/>
                        </svg>
                        Apple Pay
                        </span>
                        <span class="badge">
                        <svg viewBox="0 0 24 24">
                            <path fill="#4285F4" d="M12.24 10.285V14.4h6.806c-.275 1.765-2.056 5.174-6.806 5.174-4.095 0-7.439-3.389-7.439-7.574s3.345-7.574 7.439-7.574c2.33 0 3.891.989 4.785 1.849l3.254-3.138C18.189 1.186 15.479 0 12.24 0c-6.635 0-12 5.365-12 12s5.365 12 12 12c6.926 0 11.52-4.869 11.52-11.726 0-.788-.085-1.39-.189-1.989H12.24z"/>
                        </svg>
                        Google Pay
                        </span>
                    </div>
                    </div>
                </div>
                </label>
            </div>
        <div class="payment-option">
                <input type="radio" id="paypal" name="payment">
                <label for="paypal">
                <div class="option-content">
                    <div class="radio-circle"></div>
                    <div class="icon-container">
                    <svg viewBox="0 0 24 24">
                        <path d="M7.076 21.337H2.47a.641.641 0 0 1-.633-.74L4.944 3.72a.77.77 0 0 1 .757-.65h6.96c2.303 0 4.122.626 5.175 1.819.913 1.035 1.271 2.458.989 4.181-.012.067-.024.134-.038.2-.015.07-.032.14-.05.21-.502 2.67-2.23 4.47-5.132 5.09a10.18 10.18 0 0 1-2.197.232H9.92a.77.77 0 0 0-.758.65l-.808 5.17a.641.641 0 0 1-.633.715h-.645z"/>
                        <path d="M19.952 7.23c-.075.418-.177.854-.312 1.31-.802 2.724-2.756 4.39-5.736 4.873a9.88 9.88 0 0 1-1.728.148H9.492l-.896 5.723a.641.641 0 0 1-.633.716H5.6l.232-1.484.58-3.716.012-.077.116-.745a.77.77 0 0 1 .758-.65h1.488c.75 0 1.457-.078 2.12-.234 2.67-.624 4.278-2.29 4.907-4.765.25-.985.328-1.844.255-2.585-.027-.28-.076-.54-.146-.78.088.044.173.092.256.144.64.403 1.107.969 1.357 1.678.147.414.239.876.26 1.384l.157.06z" opacity="0.7"/>
                    </svg>
                    </div>
                    <div class="text-content">
                    <div class="option-title">PayPal</div>
                    <div class="option-description">Pay using your PayPal account</div>
                    </div>
                </div>
                </label>
        </div>
            

        <!-- Payment Button -->
        <button class="primary-btn" id="paymentBtn">Proceed with payment</button>
    </main>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const paymentOptions = document.querySelectorAll('.payment-option');
        const paymentBtn = document.getElementById('paymentBtn');

        let currentPaymentMethod = 'card';

        // Payment method switching
        paymentOptions.forEach(option => {
            option.addEventListener('click', () => {
                // Remove active class from all
                paymentOptions.forEach(o => o.classList.remove('active'));
                
                // Add active to clicked
                option.classList.add('active');
                
                // Check radio
                option.querySelector('input[type="radio"]').checked = true;
                
                // Get method
                const method = option.dataset.method;
                currentPaymentMethod = method;
                
                // Update button text
                if (method === 'card') {
                    paymentBtn.textContent = 'Proceed with payment';
                } else if (method === 'paypal') {
                    paymentBtn.textContent = 'Continue with PayPal';
                }
            });
        });

        // Payment handler
        paymentBtn.addEventListener('click', function() {
            const selectedRadio = document.querySelector('input[name="payment"]:checked');
            const paymentMethod = selectedRadio.id; // 'card' or 'paypal'
            
            console.log('Payment initiated with method:', paymentMethod);

            // Get order data
            const ticketData = sessionStorage.getItem('ticketData');
            let orderData = {};
            
            if (ticketData) {
                orderData = JSON.parse(ticketData);
            } else {
                orderData = {
                    ticketType: sessionStorage.getItem('ticketType') || 'Early Bird',
                    quantity: parseInt(sessionStorage.getItem('ticketQuantity')) || 1,
                    price: parseFloat(sessionStorage.getItem('ticketPrice')) || 25,
                    basePrice: parseFloat(sessionStorage.getItem('basePrice')) || 25
                };
            }

            const ticketType = (orderData.ticketType || 'early bird').toLowerCase();
            
            if (paymentMethod === 'paypal') {
                // Redirect to custom PayPal checkout page
                this.disabled = true;
                this.textContent = 'Redirecting to PayPal...';
                window.location.href = 'paypal-checkout.html';
                
            } else {
                // Stripe links
                const stripeLinks = {
                    'early bird': 'https://buy.stripe.com/test_eVqdRa2Iz4Po4iwgoX3Ru02',
                    'regular': 'https://buy.stripe.com/test_9B67sM3MDepY4iw3Cb3Ru03',
                    'vip': 'https://buy.stripe.com/test_fZucN6erhchQ7uI4Gf3Ru04'
                };

                const stripeLink = stripeLinks[ticketType];
                
                if (!stripeLink) {
                    alert('Payment link not configured.');
                    return;
                }

                this.disabled = true;
                this.textContent = 'Redirecting...';
                window.location.href = stripeLink;
            }
        });
    });
    </script>
    <!-- PayPal SDK -->
<script src="https://www.paypal.com/sdk/js?client-id=AWPE9j4eLjsg-JiO2cH-Gm79bhfKESA-HyqdE94q3M9uFNA9DfFqEvfKMNeZWx-AI9EJnpA6wi1MWOye&currency=AUD"></script>
</body>
</html>